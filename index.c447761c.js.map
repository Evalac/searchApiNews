{"mappings":"AAAA,SAASA,EAAaC,EAAMC,GAC1B,MAAMC,EAASF,EACZG,KACC,EAACC,OACCA,EAAMC,QACNA,EAAOC,YACPA,EAAWC,YACXA,EAAWC,MACXA,EAAKC,IACLA,EAAGC,WACHA,KACI,0FAEIA,0EAEOD,sBAAwBD,qE,kJAMhCF,sFAGAD,gDAIVM,KAAK,IAER,OAAOV,EAAYW,mBAAmB,YAAaV,E,CCqBrDW,MACE,sCAAsCC,mBACpC,4BCjDJ,MAAMC,EAAO,CACXC,WAAYC,SAASC,cAAc,gBACnCC,YAAaF,SAASC,cAAc,+BACpCE,cAAeH,SAASC,cAAc,iBAGlCG,EAAc,ICVpB,MASEC,QAAQC,GACN,MAAMC,EAAO,GAIb,OAHAA,EAAKC,OAASR,SAASC,cAAcK,GACrCC,EAAKE,MAAQF,EAAKC,OAAOP,cAAc,UACvCM,EAAKG,OAASH,EAAKC,OAAOP,cAAc,YACjCM,C,CAGTI,SACEC,KAAKL,KAAKC,OAAOK,UAAW,EAC5BD,KAAKL,KAAKE,MAAMK,YAAc,cACpBF,KAALL,KAAKG,OAAOK,UAAUC,IAAI,Y,CAGjCH,WACED,KAAKL,KAAKC,OAAOK,UAAW,EAC5BD,KAAKL,KAAKE,MAAMK,YAAc,cAC9BF,KAAKL,KAAKG,OAAOK,UAAUE,OAAO,Y,CAGpCC,OACEN,KAAKL,KAAKC,OAAOO,UAAUE,OAAO,Y,CAEpCE,OACEP,KAAKL,KAAKC,OAAOO,UAAUC,IAAI,Y,CAhCjCI,aAAYd,SAAEA,EAAQe,OAAEA,GAAS,IAC/BC,QAAQC,IAAIjB,GACZM,KAAKL,KAAOK,KAAKP,QAAQC,GACrBe,GACFT,KAAKO,M,GDKyB,CAClCb,SAAU,4BACVe,QAAQ,IAKJG,EAAiB,IDbvB,MAMEC,gBACEH,QAAQC,IAAI,SAAUX,MACtB,MAAMc,EAAU,CACdC,QAAS,CACPC,cAdQ,qCAsBNpC,EAAM,uCAA4BoB,KAAKb,0CAA0Ca,KAAKiB,OAE5F,OAAOjC,MAAMJ,EAAKkC,GACfI,MAAKC,GAAYA,EAASC,SAC1BF,MAAK,EAACG,SAAEA,MACPrB,KAAKsB,gBACED,I,CAIbC,gBACEtB,KAAKiB,MAAQ,C,CAGfM,YACEvB,KAAKiB,KAAO,C,CAGVO,YACF,OAAOxB,KAAKb,U,CAGVqC,UAAMC,GACRzB,KAAKb,WAAasC,C,CAxCpBjB,cACER,KAAKb,WAAa,GAClBa,KAAKiB,KAAO,C,GCYhB/B,EAAKC,WAAWuC,iBAAiB,UAGjC,SAAkBC,GAChBA,EAAEC,iBAEFhB,EAAeY,MAAQG,EAAEE,cAAcC,SAASC,MAAMC,MACtDpB,EAAeW,YACf/B,EAAYS,WACZT,EAAYc,OACZM,EAAeC,gBAAgBK,MAAKG,IAmBpCnC,EAAKK,cAAc0C,UAAY,GAhB7B/D,EAAamD,EAAUnC,EAAKK,eAC5BC,EAAYO,SACZP,EAAYc,MAAM,G,IAdtBpB,EAAKI,YAAYoC,iBAAiB,SAkBlC,SAAoBC,GAClBnC,EAAYS,WACZT,EAAYc,OACZM,EAAeC,gBAAgBK,MAAKG,IAClCnD,EAAamD,EAAUnC,EAAKK,eAAgBC,EAAYO,SACxDP,EAAYc,MAAM,G","sources":["src/helpers/createMarkup.js","src/helpers/newsServiceApi.js","src/index.js","src/helpers/loadMoreBtn.js"],"sourcesContent":["function createMarkup(data, containerEl) {\n  const markup = data\n    .map(\n      ({\n        author,\n        content,\n        description,\n        publishedAt,\n        title,\n        url,\n        urlToImage,\n      }) => `<article class=\"news-article\">\n        <header class=\"article-header\">\n    <img src=\"${urlToImage}\" alt=\"\">\n          <h2 class=\"article-title\">\n            <a href=\"${url}\" target=\"_blank\">${title}</a>\n          </h2>\n          <p class=\"article-author\">Автор:${author}</p>\n          <p class=\"article-date\">Опубліковано:${publishedAt}</p>\n        </header>\n        <section class=\"article-description\">\n          <p>${description}</p>\n        </section>\n        <section class=\"article-content\">\n          <p>${content}</p>\n        </section>\n      </article>`\n    )\n    .join('');\n\n  return containerEl.insertAdjacentHTML('beforeend', markup);\n}\n\nexport { createMarkup };\n","const API_KEY = `59ea23f33abe45d5ae23b6a2a5f58a36`;\nconst BASE_URL = `https://newsapi.org/v2`;\nconst CORS_PROXY = 'https://corsproxy.io/?';\n\nclass NewsApiService {\n  constructor() {\n    this.searchForm = '';\n    this.page = 1;\n  }\n\n  fetchArticles() {\n    console.log(`before`, this);\n    const options = {\n      headers: {\n        Authorization: API_KEY,\n      },\n    };\n    // const url =\n    //   `${CORS_PROXY}` +\n    //   encodeURIComponent(\n    //     `${BASE_URL}/everything?q=${this.searchForm}&language=en&pageSize=4&page=${this.page}`\n    //   );\n    const url = `${BASE_URL}/everything?q=${this.searchForm}&language=en&pageSize=4&page=${this.page}`;\n\n    return fetch(url, options)\n      .then(responce => responce.json())\n      .then(({ articles }) => {\n        this.incrementPage();\n        return articles;\n      });\n  }\n\n  incrementPage() {\n    this.page += 1;\n  }\n\n  resetPage() {\n    this.page = 1;\n  }\n\n  get query() {\n    return this.searchForm;\n  }\n\n  set query(NewQuery) {\n    this.searchForm = NewQuery;\n  }\n}\n\nexport { NewsApiService };\n\nfetch(\n  `https://api.allorigins.win/get?url=${encodeURIComponent(\n    'https://wikipedia.org'\n  )}`\n);\n","import { NewsApiService } from './helpers/newsServiceApi';\nimport { createMarkup } from './helpers/createMarkup';\nimport { LoadMoreBtn } from './helpers/loadMoreBtn';\n\nconst refs = {\n  searchForm: document.querySelector('.search-form'),\n  loadMoreBtn: document.querySelector('  [data-action=\"load-more\"]'),\n  containerNews: document.querySelector('.contentNews'),\n};\n\nconst loadMoreBtn = new LoadMoreBtn({\n  selector: '[data-action=\"load-more\"]',\n  hidden: true,\n});\n\n// loadMoreBtn.hide();\n\nconst newsApiServise = new NewsApiService();\n\nrefs.searchForm.addEventListener('submit', onSearch);\nrefs.loadMoreBtn.addEventListener('click', onLoadMore);\n\nfunction onSearch(e) {\n  e.preventDefault();\n\n  newsApiServise.query = e.currentTarget.elements.qwery.value;\n  newsApiServise.resetPage();\n  loadMoreBtn.disabled();\n  loadMoreBtn.show();\n  newsApiServise.fetchArticles().then(articles => {\n    clearArticalsContainer();\n\n    createMarkup(articles, refs.containerNews);\n    loadMoreBtn.enable();\n    loadMoreBtn.show();\n  });\n}\n\nfunction onLoadMore(e) {\n  loadMoreBtn.disabled();\n  loadMoreBtn.show();\n  newsApiServise.fetchArticles().then(articles => {\n    createMarkup(articles, refs.containerNews), loadMoreBtn.enable();\n    loadMoreBtn.show();\n  });\n}\n\nfunction clearArticalsContainer() {\n  refs.containerNews.innerHTML = '';\n}\n","class LoadMoreBtn {\n  constructor({ selector, hidden = false }) {\n    console.log(selector);\n    this.refs = this.getRefs(selector);\n    if (hidden) {\n      this.hide();\n    }\n  }\n\n  getRefs(selector) {\n    const refs = {};\n    refs.button = document.querySelector(selector);\n    refs.label = refs.button.querySelector('.label');\n    refs.spiner = refs.button.querySelector('.spinner');\n    return refs;\n  }\n\n  enable() {\n    this.refs.button.disabled = false;\n    this.refs.label.textContent = 'Показати ще';\n    this.refs.spiner.classList.add('is-hidden');\n  }\n\n  disabled() {\n    this.refs.button.disabled = true;\n    this.refs.label.textContent = 'Завантажуєм';\n    this.refs.spiner.classList.remove('is-hidden');\n  }\n\n  show() {\n    this.refs.button.classList.remove('is-hidden');\n  }\n  hide() {\n    this.refs.button.classList.add('is-hidden');\n  }\n}\nexport { LoadMoreBtn };\n"],"names":["$9ef9969977501943$export$24783e9f3a24abe4","data","containerEl","markup","map","author","content","description","publishedAt","title","url","urlToImage","join","insertAdjacentHTML","fetch","encodeURIComponent","$1f0dc3b9307be026$var$refs","searchForm","document","querySelector","loadMoreBtn","containerNews","$1f0dc3b9307be026$var$loadMoreBtn","getRefs","selector","refs","button","label","spiner","enable","this","disabled","textContent","classList","add","remove","show","hide","constructor","hidden","console","log","$1f0dc3b9307be026$var$newsApiServise","fetchArticles","options","headers","Authorization","page","then","responce","json","articles","incrementPage","resetPage","query","NewQuery","addEventListener","e","preventDefault","currentTarget","elements","qwery","value","innerHTML"],"version":3,"file":"index.c447761c.js.map"}